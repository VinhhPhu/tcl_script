#!/usr/bin/env tclsh

set data [read [open [lindex $argv 0] "r"]]
set outfp [open "3.3.output.txt" w]

#set cell_keywords {ELVT ULVT ULVTLL LVT LVTLL SVT CNOD}
#set cell_keywords {[0-9]x[0-9]}
set cell_keywords {Startpoint Endpoint}
set slack_key {slack}
set count 0

foreach line [split $data "\n"] {

    set line [string trim $line]
    if {$line eq ""} { continue }

    regsub -all {\s+} $line " " clean
    set tokens [split $clean " "]
    # Reset biến để tránh lỗi
    #set cell ""
    #set col2 ""

    set col1 [lindex $tokens 0]
    set col2 [lindex $tokens 1]
    set col_end [lindex $tokens end]

    #if {[string match *net* $col2]} {continue}
    foreach key $cell_keywords {
        if {[string match *$key* $col1]} {
        #       set cell $col1
                puts "$col1 $col2"
                #incr count
                # break
        }
    }
    foreach key_slack $slack_key {
        if {[string match *$key_slack* $col1]} {
    #           set cell $col1
                incr count
                puts "$col1 $col_end\n"
        #       break
        }

}
}
puts "Total timing paths: $count"
puts $outfp "Total timing paths: $count"
close $outfp
